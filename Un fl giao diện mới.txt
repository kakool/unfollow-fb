/*
	Script by JayremntB, 2020
	Unfollow all users who are not your friends
	Please copy all the code to make sure that you will not get any errors
	Before run this script, please navigate to https://www.facebook.com/me/following
 */

// You can change time delay below or not (in milliseconds, 1 s = 1000 ms)
let delayTime = 0;

// process, please don't modify
let _0x3911=['text','forEach','CometUserUnfollowMutation','end_cursor','keys','collection','has_next_page','open','User','ðŸ‘‰\x20Unfollowed\x20','status','catch','rootView','payload','PROFILE','Error:\x20','parse','cookie','edges','search','style_renderer','find','Starting...','Unfollow\x20all\x20users\x20who\x20are\x20not\x20your\x20friends','sectionToken','RelayModern','\x20remaining...','https://www.facebook.com/api/graphql/','readyState','responseText','exports','WWW_COMET_PROFILE','log','node','Prepare\x20to\x20unfollow...','nodes','send','timeline_nav_app_sections','payloads','user','undefined','stringify','DTSGInitialData','includes','\x20users.\x20','page_info','onreadystatechange','POST','location','Please\x20navigate\x20to\x20\x22https://www.facebook.com/me/following\x22\x20before\x20run\x20this\x20script.','ProfileCometAppCollectionListRendererPaginationQuery','data','split','ðŸ‘Œ\x20DONE!','then','token','result','append','length','collectionToken','Script\x20by\x20JayremntB,\x202020','__typename','c_user','Please\x20check\x20the\x20URL\x20again\x20if\x20you\x20did\x20not\x20navigate\x20to:\x20https://www.facebook.com/me/following','responseType'];(function(_0x1036d1,_0x3911d3){let _0x3211c6=function(_0x2b56ee){while(--_0x2b56ee){_0x1036d1['push'](_0x1036d1['shift']());}};_0x3211c6(++_0x3911d3);}(_0x3911,0x18e));let _0x3211=function(_0x1036d1,_0x3911d3){_0x1036d1=_0x1036d1-0x0;let _0x3211c6=_0x3911[_0x1036d1];return _0x3211c6;};let _0x1d9a9d=_0x3211;let fbDtsg=require(_0x1d9a9d('0x22'))[_0x1d9a9d('0x2f')],uid=document[_0x1d9a9d('0x9')][_0x1d9a9d('0x2c')](';')[_0x1d9a9d('0xd')](_0x2b56ee=>_0x2b56ee[_0x1d9a9d('0x23')](_0x1d9a9d('0x36')))[_0x1d9a9d('0x2c')]('=')[0x1];(()=>{let _0x5e9255=_0x1d9a9d;console['log'](_0x5e9255('0x34')),console[_0x5e9255('0x18')](_0x5e9255('0xf')),console[_0x5e9255('0x18')](_0x5e9255('0x29')),console[_0x5e9255('0x18')]('---------------------------'),console[_0x5e9255('0x18')](_0x5e9255('0xe')),getFollowingRouteInfo()[_0x5e9255('0x2e')](_0x583f38=>{let _0x32fa3c=_0x5e9255;return console[_0x32fa3c('0x18')]('Get\x20list\x20following...'),getAllFollowing(_0x583f38,0x1f4);})['then'](_0x3844bd=>{let _0x105650=_0x5e9255;let _0xf18b3=[];_0x3844bd[_0x105650('0x3a')](_0x12084f=>{let _0x1c24ec=_0x105650;_0x12084f[_0x1c24ec('0x19')][_0x1c24ec('0x19')][_0x1c24ec('0x35')]===_0x1c24ec('0x0')&&_0xf18b3['push'](_0x12084f);}),console[_0x105650('0x18')](_0xf18b3[_0x105650('0x32')]+'\x20users\x20will\x20be\x20unfollowed...'),console['log'](_0x105650('0x1a'));let _0x3ae39c=0x0;setTimeout(function _0x2ea604(){let _0x521e06=_0x105650;if(_0x3ae39c<_0xf18b3['length'])unfollowNotFriend(_0xf18b3[_0x3ae39c][_0x521e06('0x19')][_0x521e06('0x19')]['id'])[_0x521e06('0x2e')](()=>{let _0x428fb4=_0x521e06;console['log'](_0x428fb4('0x1')+(_0x3ae39c+0x1)+_0x428fb4('0x24')+(_0xf18b3['length']-_0x3ae39c-0x1)+_0x428fb4('0x12')),_0x3ae39c++,setTimeout(_0x2ea604,delayTime);})[_0x521e06('0x3')](_0x1355cf=>{let _0x5193ce=_0x521e06;console[_0x5193ce('0x18')](_0x1355cf);});else console[_0x521e06('0x18')](_0x521e06('0x2d'));},0x0);})[_0x5e9255('0x3')](_0x24d574=>{let _0x3e96c3=_0x5e9255;console[_0x3e96c3('0x18')](_0x24d574),console[_0x3e96c3('0x18')](_0x3e96c3('0x37'));});})();function getNextListFollowing(_0x5b2ffe,_0x261223,_0xb9fe04){return new Promise((_0x3915c0,_0x40c809)=>{let _0x3e0b13=_0x3211;request('POST',_0x3e0b13('0x13'),{'fb_dtsg':fbDtsg,'fb_api_caller_class':_0x3e0b13('0x11'),'fb_api_req_friendly_name':_0x3e0b13('0x2a'),'variables':{'count':_0xb9fe04,'cursor':_0x261223,'scale':0x1,'search':null,'id':_0x5b2ffe[_0x3e0b13('0x33')]},'doc_id':0xabdd4b9c393ee})[_0x3e0b13('0x2e')](_0x3732b5=>{let _0x2e7e46=_0x3e0b13;try{_0x3732b5=JSON[_0x2e7e46('0x8')](_0x3732b5),_0x3915c0(_0x3732b5[_0x2e7e46('0x2b')]['node']['pageItems']);}catch(_0x113824){_0x40c809(_0x113824);}})[_0x3e0b13('0x3')](_0x40c809);});}function getAllFollowing(_0x23a74c,_0x559d4d){return new Promise((_0x7bbc51,_0x32d68f)=>{let _0x5ce862=_0x3211;request(_0x5ce862('0x27'),'https://www.facebook.com/api/graphql/',{'fb_dtsg':fbDtsg,'fb_api_caller_class':_0x5ce862('0x11'),'fb_api_req_friendly_name':'ProfileCometTopAppSectionQuery','variables':{'collectionToken':_0x23a74c[_0x5ce862('0x33')],'scale':0x1,'sectionToken':_0x23a74c[_0x5ce862('0x10')],'userID':uid},'doc_id':0xbf03dcd6ed9ef})[_0x5ce862('0x2e')](_0x1dc7cd=>{let _0x5b4fcd=_0x5ce862;try{_0x1dc7cd=JSON['parse'](_0x1dc7cd);let _0x57bc10=_0x1dc7cd[_0x5b4fcd('0x2b')][_0x5b4fcd('0x1f')][_0x5b4fcd('0x1d')][_0x5b4fcd('0x1b')][0x0]['all_collections'][_0x5b4fcd('0x1b')][0x0][_0x5b4fcd('0xc')][_0x5b4fcd('0x3e')]['pageItems'];let _0x4e1f09=_0x57bc10[_0x5b4fcd('0xa')],_0x2c834a=_0x57bc10[_0x5b4fcd('0x25')];setTimeout(function _0x22526f(_0x312521=_0x2c834a[_0x5b4fcd('0x3c')]){getNextListFollowing(_0x23a74c,_0x312521,_0x559d4d)['then'](_0x2c594c=>{let _0x34bf3d=_0x3211;_0x4e1f09=_0x4e1f09['concat'](_0x2c594c[_0x34bf3d('0xa')]);if(!_0x2c594c[_0x34bf3d('0x25')][_0x34bf3d('0x3f')]){_0x7bbc51(_0x4e1f09);return;}return setTimeout(_0x22526f(_0x2c594c[_0x34bf3d('0x25')]['end_cursor']),0x0);})['catch'](_0x32d68f);},0x0);}catch(_0x28515e){_0x32d68f(_0x28515e);}})[_0x5ce862('0x3')](_0x32d68f);});}function getFollowingRouteInfo(){return new Promise((_0x3324f9,_0x42061a)=>{let _0x3a1c54=_0x3211;request(_0x3a1c54('0x27'),'https://www.facebook.com/ajax/bulk-route-definitions/',{'fb_dtsg':fbDtsg,'route_urls[0]':window[_0x3a1c54('0x28')]['pathname']+window[_0x3a1c54('0x28')][_0x3a1c54('0xb')]})[_0x3a1c54('0x2e')](_0x239584=>{let _0x3cda5e=_0x3a1c54;try{_0x239584=JSON[_0x3cda5e('0x8')](_0x239584['slice'](0x9));let _0x55d7dd=Object[_0x3cda5e('0x3d')](_0x239584[_0x3cda5e('0x5')][_0x3cda5e('0x1e')])[0x0],_0x351c66=_0x239584['payload']['payloads'][_0x55d7dd][_0x3cda5e('0x30')][_0x3cda5e('0x16')][_0x3cda5e('0x4')]['props'];_0x3324f9(_0x351c66);}catch(_0x176a6b){_0x42061a(_0x176a6b);}})[_0x3a1c54('0x3')](_0x42061a);});}function unfollowNotFriend(_0x326952){return new Promise((_0x20c60b,_0x5560ff)=>{let _0x3d3179=_0x3211;request('POST',_0x3d3179('0x13'),{'fb_dtsg':fbDtsg,'fb_api_caller_class':_0x3d3179('0x11'),'fb_api_req_friendly_name':_0x3d3179('0x3b'),'variables':{'action_render_location':_0x3d3179('0x17'),'input':{'subscribe_location':_0x3d3179('0x6'),'unsubscribee_id':_0x326952,'actor_id':uid,'client_mutation_id':'7'},'scale':0x1},'doc_id':0xd1a57d1fa7da0})[_0x3d3179('0x2e')](_0x20c60b)['catch'](_0x5560ff);});}function request(_0x5693d9,_0x2fd169,_0x300473){let _0x4fdca7=_0x1d9a9d;let _0x45ac8a=new FormData();if(_0x5693d9===_0x4fdca7('0x27'))for(let _0xf54e4 in _0x300473){_0x45ac8a[_0x4fdca7('0x31')](_0xf54e4,typeof _0x300473[_0xf54e4]==='string'?_0x300473[_0xf54e4]:JSON[_0x4fdca7('0x21')](_0x300473[_0xf54e4]));}else{if(_0x5693d9==='GET'&&typeof _0x300473!==_0x4fdca7('0x20')){_0x2fd169+='?';for(let _0x28c42a in _0x300473){_0x2fd169+=_0x28c42a+'='+encodeURI(_0x300473[_0x28c42a])+'&';}}}return new Promise((_0x404f69,_0x28d8fa)=>{let _0x110c4f=_0x4fdca7,_0x2663a0=new XMLHttpRequest();_0x2663a0[_0x110c4f('0x38')]=_0x110c4f('0x39');try{_0x2663a0[_0x110c4f('0x40')](_0x5693d9,_0x2fd169),_0x2663a0[_0x110c4f('0x1c')](_0x45ac8a),_0x2663a0[_0x110c4f('0x26')]=function(){let _0x2212f2=_0x110c4f;if(_0x2663a0[_0x2212f2('0x14')]===0x4){if(_0x2663a0[_0x2212f2('0x2')]!==0xc8)_0x28d8fa(_0x2212f2('0x7')+_0x2663a0[_0x2212f2('0x2')]);else _0x404f69(_0x2663a0[_0x2212f2('0x15')]);}};}catch(_0x3eaa88){_0x28d8fa(_0x3eaa88);}});}